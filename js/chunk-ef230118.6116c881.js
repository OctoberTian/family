(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef230118"],{"0120":function(t,e,n){},"114c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.plans,(function(e,a){return n("div",{key:a+"_"+e.id,class:1===e.status?"plan-single-issue":"plan-single-issue-solve",staticStyle:{position:"relative"},on:{touchstart:function(n){return t.selectItem(e)}}},[n("div",[n("div",{staticClass:"close-icon-two",style:1===e.status?"color: green":"grey",on:{click:function(n){return t.changePlan(e)}}},[n("el-icon",{staticClass:"el-icon-edit-outline"})],1),n("div",{staticClass:"close-icon",style:1===e.status?"color: green":"grey",on:{click:function(n){return t.deletePlan(e)}}},[n("el-icon",{staticClass:"el-icon-error"})],1)]),1===e.type?n("div",{staticClass:"oct-flex-col-v-center",staticStyle:{"margin-left":"15px"}},[n("div",[n("div",{staticClass:"oct-flex-col"},[n("div",{staticClass:"plan-issue-date"},[t._v(t._s(t.$moment(e.startTime).format("HH:mm"))+" - "+t._s(t.$moment(e.endTime).format("HH:mm")))]),n("div",[n("el-tag",{staticStyle:{margin:"5px 5px 10px 0"},attrs:{effect:"dark",type:"success",size:"mini"}},[t._v(t._s(e.subject))]),n("el-tag",{staticStyle:{margin:"5px 5px 10px 0"},attrs:{effect:"dark",type:0===e.progress?"danger":"primary",size:"mini"}},[t._v(t._s("自我评价: "+(0===e.progress?"未完成":e.progress+"分")))]),n("el-tag",{staticStyle:{margin:"5px 5px 10px 10px"},attrs:{effect:"dark",type:"info",size:"mini"}},[t._v("当日计划")])],1)]),n("div",{staticClass:"plan-issue-date-small"},[t._v(t._s(t.$moment(e.startTime).format("YYYY年MM月DD日")))]),n("div",{staticClass:"plan-issue-date-content"},[t._v(t._s(e.content))])])]):n("div",{staticClass:"oct-flex-col-v-center",staticStyle:{"margin-left":"15px"}},[n("div",[n("div",[n("div",{staticClass:"plan-issue-date-medium"},[t._v(t._s(t.$moment(e.startTime).format("YYYY年MM月DD日"))+" - "+t._s(t.$moment(e.endTime).format("YYYY年MM月DD日")))]),n("div",[n("el-slider",{staticStyle:{width:"100%","margin-left":"10px"},attrs:{max:100,min:0,step:20,"show-tooltip":!1,"show-stops":""},on:{change:t.handleSavePrgress},model:{value:e.progress,callback:function(n){t.$set(e,"progress",n)},expression:"item.progress"}})],1),n("el-tag",{staticStyle:{margin:"5px 5px 10px 0"},attrs:{effect:"dark",type:"success",size:"mini"}},[t._v(t._s(e.subject))]),n("el-tag",{staticStyle:{margin:"5px 5px 10px 0"},attrs:{effect:"dark",type:"primary",size:"mini"}},[t._v(t._s("进度:"+e.progress+"%"))]),n("el-tag",{staticStyle:{margin:"5px 5px 10px 0"},attrs:{effect:"dark",type:"info",size:"mini"}},[t._v("阶段计划")])],1),n("div",{staticClass:"plan-issue-date-content"},[t._v(t._s(e.content))])])]),n("div",{class:1===e.status?"plan-solve":"plan-solved",on:{click:function(n){return t.solvePlan(e)}}}),n("div",{staticClass:"plan-solve-content",on:{click:function(n){return t.solvePlan(e)}}},[t._v(t._s(1===e.status?"打卡":"重做"))])])})),n("van-dialog",{attrs:{title:"任务完成度",confirmButtonText:"打卡",cancelButtonText:"取消",closeOnClickOverlay:!0,closeOnPopstate:!0,"show-cancel-button":""},on:{confirm:t.confirmSolve},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[n("div",{staticStyle:{padding:"10px"}},[n("el-slider",{staticStyle:{width:"90%"},attrs:{max:100,min:0,step:20,"show-tooltip":!1,"show-stops":""},on:{change:t.handleSavePrgress},model:{value:t.currPlan.progress,callback:function(e){t.$set(t.currPlan,"progress",e)},expression:"currPlan.progress"}})],1)]),t._m(0)],2)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"oct-flex-row-all-center"},[n("div",{staticStyle:{color:"rgba(165, 145, 108, 0.8)"}},[t._v("没有更多了")])])}],s=(n("96cf"),n("3b8d")),o=(n("ac6a"),n("4bfb")),i=n("2241"),c={name:"OctAllPlan",props:{plans:{type:Array,default:function(){return[]}}},data:function(){return{progress:0,showDialog:!1,initClickWater:!1,currPlan:{}}},mounted:function(){var t=this;this.plans.forEach((function(e,n,a){t.$set(t.plans[n],"progress",e.progress)}))},methods:{confirmSolve:function(){var t={planId:this.currPlan.planId};1===this.currPlan.status?t.status=2:t.status=1,this.changePlanStatus(t)},selectItem:function(t){this.currPlan=t},handleSavePrgress:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={progress:e,planId:this.currPlan.planId},t.next=3,Object(o["m"])(n).catch((function(){a.$notify.error("调整计划进度失败！")}));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getTimeStr:function(t,e){return t=new Date(t),this.$moment(t).format(e)},solvePlan:function(t){if(1===t.type&&1===t.status)this.currPlan=t,this.showDialog=!0;else{var e={planId:t.planId};1===t.status?e.status=2:e.status=1,this.changePlanStatus(e)}},changePlanStatus:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])(e).then((function(){n.$emit("reload")}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),deletePlan:function(t){var e=this;i["a"].confirm({title:"删除计划",message:"确认删除计划?"}).then((function(){e.handleDeletePlan(t)})).catch((function(){}))},changePlan:function(t){1===t.type?this.$router.push(this.$router.push({name:"OctAddPlan",params:{mode:"change",plan:t}})):this.$router.push(this.$router.push({name:"OctAddPlanRange",params:{mode:"change",plan:t}}))},handleDeletePlan:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={planId:e.planId},t.next=3,Object(o["e"])(n).then((function(){a.$notify.success("删除成功"),a.$emit("reload")}));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},l=c,u=(n("bee7"),n("2877")),d=Object(u["a"])(l,a,r,!1,null,"0022f9a6",null);e["a"]=d.exports},"1a20":function(t,e,n){"use strict";var a=n("f0cb"),r=n.n(a);r.a},"28c9":function(t,e,n){},"4bfb":function(t,e,n){"use strict";n.d(e,"n",(function(){return r})),n.d(e,"l",(function(){return s})),n.d(e,"g",(function(){return o})),n.d(e,"i",(function(){return i})),n.d(e,"j",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"e",(function(){return m})),n.d(e,"b",(function(){return h})),n.d(e,"m",(function(){return v})),n.d(e,"k",(function(){return g}));var a=n("b775");function r(t){return Object(a["a"])({url:"/family/saveRecord",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/family/savePlan",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/family/getPlanByPage",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/family/getRecordByPage",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/family/getRecordDayByPage",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/family/changePlanStatus",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/family/getRecordByDay",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/family/changeRecord",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/family/deleteRecord",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/family/addRecord",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/family/deletePlan",method:"post",data:t})}function h(t){return Object(a["a"])({url:"/family/changePlan",method:"post",data:t})}function v(t){return Object(a["a"])({url:"/family/saveProgress",method:"post",data:t})}function g(){return Object(a["a"])({url:"/family/nowStatus",method:"post"})}},"5dbc":function(t,e,n){var a=n("d3f4"),r=n("8b97").set;t.exports=function(t,e,n){var s,o=e.constructor;return o!==n&&"function"==typeof o&&(s=o.prototype)!==n.prototype&&a(s)&&r&&r(t,s),t}},"630d":function(t,e,n){"use strict";var a=n("28c9"),r=n.n(a);r.a},6387:function(t,e,n){},"8b97":function(t,e,n){var a=n("d3f4"),r=n("cb7c"),s=function(t,e){if(r(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:s}},aa77:function(t,e,n){var a=n("5ca1"),r=n("be13"),s=n("79e5"),o=n("fdef"),i="["+o+"]",c="​",l=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),d=function(t,e,n){var r={},i=s((function(){return!!o[t]()||c[t]()!=c})),l=r[t]=i?e(f):o[t];n&&(r[n]=l),a(a.P+a.F*i,"String",r)},f=d.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},abcc:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-body"},[n("oct-plan-calender")],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan-main-range"},[n("div",{staticClass:"float-button oct-flex-col-all-center"},[n("el-button",{staticClass:"round-btn",attrs:{circle:"",type:"text"},on:{click:function(e){return t.addPlan(0)}}},[n("el-icon",{class:t.showConfig?"el-icon-arrow-down":"el-icon-plus"})],1)],1),n("transition",{attrs:{name:"el-zoom-in-bottom"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showConfig,expression:"showConfig"}],staticClass:"float-button-one"},[n("div",{staticClass:"float-button-two oct-flex-col-all-center"},[n("el-button",{staticClass:"round-btn",attrs:{circle:"",type:"text"},on:{click:function(e){return t.addPlan(1)}}},[t._v("阶段")])],1),n("div",{staticClass:"float-button-two oct-flex-col-all-center"},[n("el-button",{staticClass:"round-btn",attrs:{circle:"",type:"text"},on:{click:function(e){return t.addPlan(2)}}},[t._v("当日")])],1)])]),n("div",{staticClass:"float-button-today oct-flex-col-all-center"},[n("el-button",{staticClass:"round-btn-today",attrs:{circle:"",type:"text"},on:{click:t.moveToday}},[t._v("今")])],1),n("van-calendar",{style:{height:"390px"},attrs:{id:"popCanlender",color:"rgb(165, 145, 108)",poppable:!1,"max-date":t.maxDate,"min-date":t.minDate,"default-date":t.defaultDate,"show-confirm":!1,formatter:t.formatter},on:{select:t.selectDate}}),n("van-tabs",{staticStyle:{margin:"0 -10px 110px -10px"},attrs:{"lazy-render":"",sticky:"",type:"card",background:"rgb(235, 232, 221)",color:"rgba(165, 145, 108, 1)",ellipsis:!1},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:"当日计划"}},[n("oct-show-plan-list",{ref:"today",attrs:{type:1,status:1,plans:t.plans},on:{reload:t.reload}})],1),n("van-tab",{attrs:{title:"阶段计划"}},[n("oct-show-plan-list",{ref:"range",attrs:{type:2,status:1,plans:t.plans},on:{reload:t.reload}})],1),n("van-tab",{attrs:{title:"当日已完成"}},[n("oct-show-plan-list",{ref:"todayDone",attrs:{type:1,status:2,plans:t.plans},on:{reload:t.reload}})],1),n("van-tab",{attrs:{title:"阶段已完成"}},[n("oct-show-plan-list",{ref:"rangeDone",attrs:{type:2,status:2,plans:t.plans},on:{reload:t.reload}})],1)],1)],1)},o=[],i=(n("96cf"),n("3b8d")),c=(n("ac6a"),n("4bfb")),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{margin:"0 10px","overflow-y":"auto","max-height":"100vh","min-height":"100vh"}},[n("oct-all-plan",{attrs:{plans:t.myplans},on:{reload:t.reload}})],1)},u=[],d=(n("c5f6"),n("114c")),f={name:"OctShowPlanList",components:{OctAllPlan:d["a"]},props:{type:{type:Number,defalut:1},status:{type:Number,default:1},plans:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,finished:!1,total:0,page:{startPage:1,pageNum:5},myplans:[]}},mounted:function(){this.initData(this.plans)},watch:{plans:function(t){this.initData(t)}},methods:{initData:function(t){var e=this;this.myplans=[],t.forEach((function(t){e.type===t.type&&e.status===t.status&&e.myplans.push(t)}))},reload:function(){this.$emit("reload")}}},p=f,m=n("2877"),h=Object(m["a"])(p,l,u,!1,null,"4082511f",null),v=h.exports,g={name:"OctPlanCalender",components:{OctShowPlanList:v},data:function(){return{active:"",showConfig:!1,showAddPlan:!0,selectTime:new Date,maxDate:new Date((new Date).getFullYear()+1,12,31),minDate:new Date((new Date).getFullYear()-1,1,1),defaultDate:new Date,plans:[]}},mounted:function(){this.initData(),this.moveToday()},activated:function(){this.moveToday()},watch:{selectTime:function(){this.changeSelectStyle()}},methods:{changeSelectStyle:function(){var t=document.getElementsByClassName("van-calendar__selected-day")[0];t.innerHTML=t.innerHTML.substring(0,t.innerHTML.indexOf("</div>")+6);var e=this.selectTime.getFullYear(),n=this.selectTime.getMonth()+1,a=this.selectTime.getDate(),r="",s="";this.plans.forEach((function(t){var o=new Date(t.startTime).getFullYear(),i=new Date(t.startTime).getMonth()+1,c=new Date(t.startTime).getDate();1===t.type?e===o&&n===i&&a===c&&(r+=t.subject,r+=" "):(e===o&&n===i&&a===c&&(s+=t.subject,s+=" "),o=new Date(t.endTime).getFullYear(),i=new Date(t.endTime).getMonth()+1,c=new Date(t.endTime).getDate(),e===o&&n===i&&a===c&&(s+=t.subject,s+=" "))})),setTimeout((function(){var t=document.getElementsByClassName("van-calendar__selected-day")[0],e='<div class="van-calendar__top-info">'+r+"</div>",n='<div class="van-calendar__bottom-info">'+s+"</div>"+a,o=e+n;-1===t.innerHTML.indexOf(o)&&(t.innerHTML=o)}),1)},reload:function(){this.initData()},initData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={startPage:-1},t.next=3,Object(c["g"])(e).then((function(t){n.plans=[],0!==t.data.data.length&&(n.plans=t.data.data,n.changeSelectStyle())}));case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),moveToday:function(){document.getElementsByClassName("van-calendar__body")[0].scrollTop=document.getElementsByClassName("van-calendar__month")[11].offsetTop-80},selectDate:function(t){this.showAddPlan=!0,this.selectTime=t},formatter:function(t){var e=t.date.getFullYear(),n=t.date.getMonth()+1,a=t.date.getDate();return this.plans.forEach((function(r){if(1===r.type){var s=new Date(r.startTime).getFullYear(),o=new Date(r.startTime).getMonth()+1,i=new Date(r.startTime).getDate();e===s&&n===o&&a===i&&(void 0!==t.topInfo?t.topInfo+=r.subject:t.topInfo=r.subject,t.topInfo+=" ")}else if(2===r.type){var c=new Date(r.startTime).getFullYear(),l=new Date(r.startTime).getMonth()+1,u=new Date(r.startTime).getDate();e===c&&n===l&&a===u&&(void 0!==t.bottomInfo?t.bottomInfo+=r.subject:t.bottomInfo=r.subject,t.bottomInfo+=" "),c=new Date(r.endTime).getFullYear(),l=new Date(r.endTime).getMonth()+1,u=new Date(r.endTime).getDate(),e===c&&n===l&&a===u&&(void 0!==t.bottomInfo?t.bottomInfo+=r.subject:t.bottomInfo=r.subject,t.bottomInfo+=" ")}})),t},addPlan:function(t){this.showConfig=!this.showConfig,2===t&&this.$router.push(this.$router.push({name:"OctAddPlan",params:{mode:"add",date:this.selectTime}})),1===t&&this.$router.push(this.$router.push({name:"OctAddPlanRange",params:{mode:"add",date:this.selectTime}}))}}},y=g,b=(n("be76"),n("1a20"),Object(m["a"])(y,s,o,!1,null,"41b21d90",null)),w=b.exports,x={name:"MakePlan",components:{OctPlanCalender:w},data:function(){return{}}},_=x,D=(n("630d"),Object(m["a"])(_,a,r,!1,null,"1c76d05a",null));e["default"]=D.exports},be76:function(t,e,n){"use strict";var a=n("6387"),r=n.n(a);r.a},bee7:function(t,e,n){"use strict";var a=n("0120"),r=n.n(a);r.a},c5f6:function(t,e,n){"use strict";var a=n("7726"),r=n("69a8"),s=n("2d95"),o=n("5dbc"),i=n("6a99"),c=n("79e5"),l=n("9093").f,u=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,p="Number",m=a[p],h=m,v=m.prototype,g=s(n("2aeb")(v))==p,y="trim"in String.prototype,b=function(t){var e=i(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():f(e,3);var n,a,r,s=e.charCodeAt(0);if(43===s||45===s){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var o,c=e.slice(2),l=0,u=c.length;l<u;l++)if(o=c.charCodeAt(l),o<48||o>r)return NaN;return parseInt(c,a)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof m&&(g?c((function(){v.valueOf.call(n)})):s(n)!=p)?o(new h(b(e)),n,m):b(e)};for(var w,x=n("9e1e")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;x.length>_;_++)r(h,w=x[_])&&!r(m,w)&&d(m,w,u(h,w));m.prototype=v,v.constructor=m,n("2aba")(a,p,m)}},f0cb:function(t,e,n){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-ef230118.6116c881.js.map