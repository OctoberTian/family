(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a03e96ee"],{"02f4":function(e,r,t){var n=t("4588"),o=t("be13");e.exports=function(e){return function(r,t){var a,i,s=String(o(r)),l=n(t),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===c||(i=s.charCodeAt(l+1))<56320||i>57343?e?s.charAt(l):a:e?s.slice(l,l+2):i-56320+(a-55296<<10)+65536)}}},"0390":function(e,r,t){"use strict";var n=t("02f4")(!0);e.exports=function(e,r,t){return r+(t?n(e,r).length:1)}},"0bfb":function(e,r,t){"use strict";var n=t("cb7c");e.exports=function(){var e=n(this),r="";return e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u"),e.sticky&&(r+="y"),r}},"214f":function(e,r,t){"use strict";t("b0c5");var n=t("2aba"),o=t("32e9"),a=t("79e5"),i=t("be13"),s=t("2b4c"),l=t("520a"),c=s("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,r=e.exec;e.exec=function(){return r.apply(this,arguments)};var t="ab".split(e);return 2===t.length&&"a"===t[0]&&"b"===t[1]}();e.exports=function(e,r,t){var p=s(e),m=!a((function(){var r={};return r[p]=function(){return 7},7!=""[e](r)})),d=m?!a((function(){var r=!1,t=/a/;return t.exec=function(){return r=!0,null},"split"===e&&(t.constructor={},t.constructor[c]=function(){return t}),t[p](""),!r})):void 0;if(!m||!d||"replace"===e&&!u||"split"===e&&!f){var g=/./[p],h=t(i,p,""[e],(function(e,r,t,n,o){return r.exec===l?m&&!o?{done:!0,value:g.call(r,t,n)}:{done:!0,value:e.call(t,r,n)}:{done:!1}})),v=h[0],b=h[1];n(String.prototype,e,v),o(RegExp.prototype,p,2==r?function(e,r){return b.call(e,this,r)}:function(e){return b.call(e,this)})}}},"520a":function(e,r,t){"use strict";var n=t("0bfb"),o=RegExp.prototype.exec,a=String.prototype.replace,i=o,s="lastIndex",l=function(){var e=/a/,r=/b*/g;return o.call(e,"a"),o.call(r,"a"),0!==e[s]||0!==r[s]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(i=function(e){var r,t,i,u,f=this;return c&&(t=new RegExp("^"+f.source+"$(?!\\s)",n.call(f))),l&&(r=f[s]),i=o.call(f,e),l&&i&&(f[s]=f.global?i.index+i[0].length:r),c&&i&&i.length>1&&a.call(i[0],t,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)})),i}),e.exports=i},"5f1b":function(e,r,t){"use strict";var n=t("23c6"),o=RegExp.prototype.exec;e.exports=function(e,r){var t=e.exec;if("function"===typeof t){var a=t.call(e,r);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,r)}},"71a8":function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"main-body",style:e.backgroundDiv},[t("el-card",{staticClass:"wish-card",attrs:{shadow:"none"}},[t("div",{staticClass:"header-logo"},[t("el-image",{staticClass:"carousel-image",attrs:{src:e.logo,fit:"fill"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}],staticStyle:{width:"100%"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"0"}},[t("el-form-item",{attrs:{label:"",prop:"username"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"请输入用户名"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),t("el-form-item",{attrs:{label:"",prop:"pass"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-s-cooperation",type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.ruleForm.pass,callback:function(r){e.$set(e.ruleForm,"pass",r)},expression:"ruleForm.pass"}})],1),t("el-form-item",[t("el-button",{staticClass:"submit-btn",attrs:{type:"primary",loading:e.loading},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("登录")])],1),t("el-form-item",[t("el-button",{staticClass:"submit-btn",attrs:{type:"info",loading:e.loading},on:{click:function(r){e.showLogin=!1}}},[e._v("注册")])],1)],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showLogin,expression:"!showLogin"}]},[t("el-form",{ref:"ruleForm2",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules,"label-width":"0"}},[t("el-form-item",{attrs:{label:"",prop:"username"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"请输入用户名"},model:{value:e.ruleForm2.username,callback:function(r){e.$set(e.ruleForm2,"username",r)},expression:"ruleForm2.username"}})],1),t("el-form-item",{attrs:{label:"",prop:"pass"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-s-cooperation",type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.ruleForm2.pass,callback:function(r){e.$set(e.ruleForm2,"pass",r)},expression:"ruleForm2.pass"}})],1),t("el-form-item",{attrs:{label:"",prop:"rePass"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-s-cooperation",type:"password",autocomplete:"off",placeholder:"请再次输入密码"},model:{value:e.ruleForm2.rePass,callback:function(r){e.$set(e.ruleForm2,"rePass",r)},expression:"ruleForm2.rePass"}})],1),t("el-form-item",[t("el-button",{staticClass:"submit-btn",attrs:{type:"primary",loading:e.loading},on:{click:function(r){return e.submitForm("ruleForm2")}}},[e._v("注册")])],1),t("el-form-item",[t("el-button",{staticClass:"submit-btn",attrs:{type:"info",loading:e.loading},on:{click:function(r){e.showLogin=!0}}},[e._v("返回")])],1)],1)],1)])],1)},o=[],a=(t("a481"),t("96cf"),t("3b8d")),i=t("b775");function s(e){return Object(i["a"])({url:"/family/user",method:"post",data:e})}var l=t("cf05"),c=t.n(l),u={name:"Login",watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},data:function(){var e=this,r=function(e,r,t){if(!r)return t(new Error("用户名不能为空"));t()},n=function(r,t,n){""===t?n(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),n())},o=function(r,t,n){""===t?n(new Error("请输入密码")):e.ruleForm2.pass!==e.ruleForm2.rePass?n(new Error("两次密码输入不同")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),n())};return{showLogin:!0,redirect:void 0,carouselHeight:"400px",backgroundDiv:{backgroundImage:"url("+t("e3ca")+")"},logo:c.a,loading:!1,ruleForm:{pass:"",username:""},ruleForm2:{pass:"",rePass:"",username:"",selectFamily:""},rules:{pass:[{validator:n,trigger:"blur"}],username:[{validator:r,trigger:"blur"}],rePass:[{validator:o,trigger:"blur"}]}}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return!1;if(r.loading=!0,r.showLogin){var t={username:r.ruleForm.username,password:r.ruleForm.pass};r.$store.dispatch("Login",t).then((function(){r.getInfo()})).catch((function(){r.loading=!1,r.$message.error("用户名密码错误")}))}else r.userRegister()}))},userRegister:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var r,t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={username:this.ruleForm2.username,password:this.ruleForm2.pass},e.next=3,s(r).then((function(){t.$message.success("注册成功！"),t.showLogin=!0,t.loading=!1})).catch((function(){t.$message.error("注册失败，请重试！"),t.loading=!1}));case 3:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}(),getInfo:function(){var e=this;this.$store.dispatch("GetInfo").then((function(){e.loading=!1,e.$router.replace({path:e.redirect||"/index"})})).catch((function(){e.loading=!1,e.$message.error("获取个人信息失败")}))}}},f=u,p=(t("ccc9"),t("2877")),m=Object(p["a"])(f,n,o,!1,null,"06abd227",null);r["default"]=m.exports},a481:function(e,r,t){"use strict";var n=t("cb7c"),o=t("4bf8"),a=t("9def"),i=t("4588"),s=t("0390"),l=t("5f1b"),c=Math.max,u=Math.min,f=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g,d=function(e){return void 0===e?e:String(e)};t("214f")("replace",2,(function(e,r,t,g){return[function(n,o){var a=e(this),i=void 0==n?void 0:n[r];return void 0!==i?i.call(n,a,o):t.call(String(a),n,o)},function(e,r){var o=g(t,e,this,r);if(o.done)return o.value;var f=n(e),p=String(this),m="function"===typeof r;m||(r=String(r));var v=f.global;if(v){var b=f.unicode;f.lastIndex=0}var x=[];while(1){var w=l(f,p);if(null===w)break;if(x.push(w),!v)break;var F=String(w[0]);""===F&&(f.lastIndex=s(p,a(f.lastIndex),b))}for(var y="",$=0,k=0;k<x.length;k++){w=x[k];for(var E=String(w[0]),C=c(u(i(w.index),p.length),0),R=[],L=1;L<w.length;L++)R.push(d(w[L]));var P=w.groups;if(m){var S=[E].concat(R,C,p);void 0!==P&&S.push(P);var I=String(r.apply(void 0,S))}else I=h(E,p,C,R,P,r);C>=$&&(y+=p.slice($,C)+I,$=C+E.length)}return y+p.slice($)}];function h(e,r,n,a,i,s){var l=n+e.length,c=a.length,u=m;return void 0!==i&&(i=o(i),u=p),t.call(s,u,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(l);case"<":s=i[o.slice(1,-1)];break;default:var u=+o;if(0===u)return t;if(u>c){var p=f(u/10);return 0===p?t:p<=c?void 0===a[p-1]?o.charAt(1):a[p-1]+o.charAt(1):t}s=a[u-1]}return void 0===s?"":s}))}}))},b0c5:function(e,r,t){"use strict";var n=t("520a");t("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},ccc9:function(e,r,t){"use strict";var n=t("cd9f"),o=t.n(n);o.a},cd9f:function(e,r,t){},cf05:function(e,r,t){e.exports=t.p+"img/logo.716bd198.png"},e3ca:function(e,r,t){e.exports=t.p+"img/webapplogin.d5620963.png"}}]);
//# sourceMappingURL=chunk-a03e96ee.cea7e441.js.map